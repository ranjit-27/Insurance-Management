<div class="p-6 w-full bg-[#e6f3ff] min-h-screen space-y-8">

  <!-- Back Button -->
  <button (click)="admin()" 
    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition font-semibold shadow-sm">
    ← Back to Admin Dashboard
  </button>

  <!-- Page Title -->
  <h2 class="text-3xl font-bold text-gray-800 text-center">Customer Management</h2>

  <!-- Customer List -->
  <div class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200 w-full">
    <h3 class="text-xl font-semibold text-gray-700 mb-4">All Customers</h3>
    <div class="overflow-x-auto">
      <table class="w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Name</th>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Email</th>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-600">Policies</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <tr *ngFor="let customer of customers" class="hover:bg-gray-50 transition">
            <td class="px-6 py-4 font-medium text-gray-700">{{ customer.name }}</td>
            <td class="px-6 py-4 text-gray-600">{{ customer.email }}</td>
            <td class="px-6 py-4">
              <button (click)="getCustomerPolicies(customer._id)" 
                class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition font-semibold shadow">
                View Policies
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Selected Customer Policies -->
  <div *ngIf="selectedCustomerPolicies.length > 0" 
    class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200 w-full">
    <h3 class="text-xl font-semibold text-gray-700 mb-4">Customer Policies</h3>
    <ul class="divide-y divide-gray-100">
      <li *ngFor="let policy of selectedCustomerPolicies" 
        class="py-3 flex flex-col sm:flex-row sm:justify-between sm:items-center">
        
        <div class="text-gray-700">
          <span class="font-medium text-gray-800">Policy Code:</span> {{ policy.policyProductId?.code }}
        </div>

        <div class="text-gray-700">
          <span class="font-medium text-gray-800">Title:</span> {{ policy.policyProductId?.title }}
        </div>

        <div class="text-gray-700">
          <span class="font-medium text-gray-800">Premium Paid:</span> ₹{{ policy.premiumPaid }}
        </div>

        <div class="text-gray-700">
          <span class="font-medium text-gray-800">Status:</span>
          <span 
            class="px-2 py-1 rounded-full text-white text-xs font-semibold"
            [ngClass]="{
              'bg-green-500': policy.status === 'active',
              'bg-yellow-500': policy.status === 'pending',
              'bg-red-500': policy.status === 'cancelled'
            }"
          >
            {{ policy.status | titlecase }}
          </span>
        </div>

      </li>
    </ul>
  </div>

</div>
