<!-- Back Button -->
<div class="max-w-7xl mx-auto p-6">
  <button (click)="admin()"
    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition mb-4">
    ← Back to Admin Dashboard
  </button>
</div>

<!-- Main Container -->
<div class="min-h-screen w-full bg-gradient-to-br from-[#e6f3ff] via-[#f8fbff] to-[#ffffff] flex justify-center p-6">
  <div class="max-w-6xl w-full space-y-10">

    <!-- Add / Update Policy Form -->
    <div class="bg-white/80 backdrop-blur-sm shadow-lg rounded-2xl p-6 border border-gray-200">
      <h2 class="text-3xl font-bold mb-6 text-[#1a365d]">
        {{ selectedPolicy ? 'Update Policy' : 'Add New Policy' }}
      </h2>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

        <div>
          <label class="block text-sm font-medium text-[#2c5282]">Code</label>
          <input type="text" [(ngModel)]="code"
            class="mt-1 block w-full rounded-md border border-[#cbd5e0] p-2 shadow-sm focus:ring-2 focus:ring-[#3182ce] focus:border-[#3182ce]">
        </div>

        <div>
          <label class="block text-sm font-medium text-[#2c5282]">Title</label>
          <input type="text" [(ngModel)]="title"
            class="mt-1 block w-full rounded-md border border-[#cbd5e0] p-2 shadow-sm focus:ring-2 focus:ring-[#3182ce] focus:border-[#3182ce]">
        </div>

        <div>
          <label class="block text-sm font-medium text-[#2c5282]">Premium</label>
          <input type="number" [(ngModel)]="premium"
            class="mt-1 block w-full rounded-md border border-[#cbd5e0] p-2 shadow-sm focus:ring-2 focus:ring-[#3182ce] focus:border-[#3182ce]">
        </div>

        <div>
          <label class="block text-sm font-medium text-[#2c5282]">Term (Months)</label>
          <input type="number" [(ngModel)]="termMonths"
            class="mt-1 block w-full rounded-md border border-[#cbd5e0] p-2 shadow-sm focus:ring-2 focus:ring-[#3182ce] focus:border-[#3182ce]">
        </div>

        <div>
          <label class="block text-sm font-medium text-[#2c5282]">Min Sum Insured</label>
          <input type="number" [(ngModel)]="minSumInsured"
            class="mt-1 block w-full rounded-md border border-[#cbd5e0] p-2 shadow-sm focus:ring-2 focus:ring-[#3182ce] focus:border-[#3182ce]">
        </div>

        <div class="sm:col-span-2 lg:col-span-3">
          <label class="block text-sm font-medium text-[#2c5282]">Description</label>
          <textarea [(ngModel)]="description"
            class="mt-1 block w-full rounded-md border border-[#cbd5e0] p-2 shadow-sm focus:ring-2 focus:ring-[#3182ce] focus:border-[#3182ce]"></textarea>
        </div>

      </div>

      <!-- Action Buttons -->
      <div class="flex flex-wrap gap-4 mt-6">
        <button *ngIf="!selectedPolicy" (click)="addPolicy()"
          class="bg-gradient-to-r from-[#2c5282] to-[#3182ce] text-white px-6 py-2 rounded-xl shadow hover:opacity-90 transition">
          Add Policy
        </button>
        <button *ngIf="selectedPolicy" (click)="updatePolicy()"
          class="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-2 rounded-xl shadow hover:opacity-90 transition">
          Update Policy
        </button>
        <button *ngIf="selectedPolicy" (click)="resetForm()"
          class="bg-gradient-to-r from-gray-400 to-gray-500 text-white px-6 py-2 rounded-xl shadow hover:opacity-90 transition">
          Cancel
        </button>
      </div>
    </div>

    <!-- Policies Table -->
    <div class="bg-white/80 backdrop-blur-sm shadow-lg rounded-2xl p-6 border border-gray-200">
      <h2 class="text-3xl font-bold mb-6 text-[#1a365d]">Available Policies</h2>

      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden">
          <thead class="bg-gradient-to-r from-[#2c5282] to-[#3182ce] text-white">
            <tr>
              <th class="px-6 py-3 text-left">Code</th>
              <th class="px-6 py-3 text-left">Title</th>
              <th class="px-6 py-3 text-left">Premium</th>
              <th class="px-6 py-3 text-left">Term</th>
              <th class="px-6 py-3 text-left">Min Sum Insured</th>
              <th class="px-6 py-3 text-left">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white">
            <tr *ngFor="let policy of policies" class="border-t hover:bg-[#f0f7ff] transition">
              <td class="px-6 py-4 font-medium text-gray-700">{{ policy.code }}</td>
              <td class="px-6 py-4 text-gray-600">{{ policy.title }}</td>
              <td class="px-6 py-4 text-gray-600">₹{{ policy.premium }}</td>
              <td class="px-6 py-4 text-gray-600">{{ policy.termMonths }} months</td>
              <td class="px-6 py-4 text-gray-600">₹{{ policy.minSumInsured }}</td>
              <td class="px-6 py-4 space-x-2">
                <button (click)="selectPolicy(policy)"
                  class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-3 py-1 rounded-lg shadow hover:opacity-90 transition">
                  Edit
                </button>
                <button (click)="deletePolicy(policy._id!)"
                  class="bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded-lg shadow hover:opacity-90 transition">
                  Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

  </div>
</div>
<router-outlet></router-outlet>
